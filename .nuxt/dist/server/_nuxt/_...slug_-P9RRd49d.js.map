{"version":3,"file":"_...slug_-P9RRd49d.js","sources":["../../../../components/Toc.vue","../../../../components/Form.vue","../../../../pages/blog/[...slug].vue"],"sourcesContent":["<!-- ./components/Toc.vue -->\n\n<script setup>\n// define links prop\ndefineProps([\"links\"]);\n\n// flatten TOC links nested arrays to one array\nconst flattenLinks = (links) => {\n  let _links = links\n    .map((link) => {\n      let _link = [link];\n      if (link.children) {\n        let flattened = flattenLinks(link.children);\n        _link = [link, ...flattened];\n      }\n      return _link;\n    })\n    .flat(1);\n\n  console.log({ _links });\n\n  return _links;\n};\n</script>\n\n<template>\n  <nav class=\"toc\">\n    <header class=\"toc-header\">\n      <h3 class=\"text-xl font-bold\">Table of contents</h3>\n    </header>\n    <ul class=\"toc-links\">\n      <!-- render each link with depth class -->\n      <li v-for=\"link of flattenLinks(links)\" :key=\"link.id\" :class=\"`toc-link _${link.depth}`\">\n        <a :href=\"`#${link.id}`\">\n          {{ link.text }}\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<style scoped>\n.toc {\n  @apply p-4 bg-slate-50 border border-slate-200 rounded-lg;\n  @apply max-h-[calc(100vh-6rem)] overflow-auto;\n}\n\n.toc-header {\n  @apply pb-2 mb-2 border-b border-slate-200;\n}\n\n.toc-links {\n  @apply flex flex-col gap-2 px-2;\n}\n\n.toc-link {\n  @apply text-slate-500;\n}\n\n.toc-link._3 {\n  @apply pl-3;\n}\n\n.toc-link._4 {\n  @apply pl-6;\n}\n\n.toc-link._undefined {\n  @apply pl-8;\n}\n</style>\n","<template>\n  <div class=\"bg-gray-100 mb-4 mt-4\">\n    <div\n      class=\"mx-auto max-w-7xl py-12 px-4 sm:px-6 lg:flex lg:items-center lg:justify-between lg:py-16 lg:px-8\"\n    >\n      <h2 class=\"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl\">\n        <span class=\"block\">Want exclusive content?</span>\n        <span class=\"block text-blue-600\">Sign up for our free newsletter</span>\n      </h2>\n      <div class=\"mt-8 flex lg:mt-0 lg:flex-shrink-0\">\n        <form @submit.prevent=\"postToDB\" class=\"ml-2 inline-flex rounded-md shadow\">\n          <label for=\"email\" class=\"hidden leading-7 text-sm text-gray-600\">email</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            v-model=\"userEmail\"\n            name=\"email\"\n            class=\"w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-gray-400 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out\"\n          />\n          <button\n            class=\"inline-flex ml-2 items-center justify-center rounded-md border border-transparent bg-gray-600 px-5 py-3 text-base font-medium text-white hover:bg-blue-900\"\n          >\n            Subscribe\n          </button>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nconst DBResponse = ref([]);\n\nconst router = useRouter();\nconst userEmail = ref(\"\");\n\nasync function postToDB() {\n  const result = await fetch(`/api/subscribe?email=${userEmail.value}`);\n  const data = await result.json();\n  DBResponse.value = data;\n  email.value = \"\";\n}\n</script>\n","<!-- ./pages/blog/[â€¦slug.vue] -->\n\n<script setup>\nconst { path } = useRoute();\nconst { data } = await useAsyncData(`content-${path}`, async () => {\n  // fetch document where the document path matches with the cuurent route\n  let article = queryContent().where({ _path: path }).findOne();\n  // get the surround information,\n  // which is an array of documeents that come before and after the current document\n  let surround = queryContent()\n    .only([\"_path\", \"title\", \"description\"])\n    .sort({ date: 1 })\n    .findSurround(path);\n\n  return {\n    article: await article,\n    surround: await surround,\n  };\n});\n\n// destrucure `prev` and `next` value from data\nconst [prev, next] = data.value.surround;\nconsole.log({ data, prev, next });\n\n// set the meta\nuseHead({\n  title: data.value.article.title,\n  meta: [\n    { name: \"description\", content: data.value.article.description },\n    {\n      hid: \"og:image\",\n      property: \"og:image\",\n      content: `https://site.com/${data.value.article.img}`,\n    },\n  ],\n});\n</script>\n<template>\n  <main id=\"main\" class=\"article-main\">\n    <Head>\n      <Script\n        defer\n        data-domain=\"rotorink.com\"\n        src=\"https://plausible.io/js/plausible.js\"\n      />\n    </Head>\n    <header v-if=\"data.article\" class=\"article-header\">\n      <div class=\"img-cont h-72 mb-12\">\n        <img\n          :src=\"`/${data.article.img}`\"\n          :alt=\"data.article.title\"\n          class=\"rounded-2xl\"\n        />\n      </div>\n      <h1 class=\"heading\">{{ data.article.title }}</h1>\n      <p class=\"supporting\">{{ data.article.description }}</p>\n      <ul class=\"article-tags\">\n        <li class=\"tag\" v-for=\"(tag, n) in data.article.tags\" :key=\"n\">{{ tag }}</li>\n      </ul>\n    </header>\n\n    <hr />\n\n    <section class=\"article-section\">\n      <aside class=\"aside\">\n        <!-- Toc Component -->\n        <Toc :links=\"data.article.body.toc.links\" />\n      </aside>\n      <article class=\"article\">\n        <!-- render document coming from query -->\n        <ContentRenderer :value=\"data.article\">\n          <!-- render rich text from document -->\n          <MarkdownRenderer :value=\"data.article\" />\n\n          <!-- display if document content is empty -->\n          <template #empty>\n            <p>No content found.</p>\n          </template>\n        </ContentRenderer>\n      </article>\n    </section>\n\n    <Form />\n\n    <!-- PrevNext Component -->\n    <PrevNext :prev=\"prev\" :next=\"next\" />\n  </main>\n</template>\n\n<style scoped>\n.article-main {\n  @apply p-4 max-w-5xl m-auto;\n}\n\n.article-header {\n  @apply p-4 pb-12;\n}\n\n.article-header .heading {\n  @apply font-extrabold text-5xl;\n}\n\n.article-header .supporting {\n  @apply font-medium text-lg;\n}\n\n.article-section {\n  @apply grid grid-cols-8;\n}\n\n.aside {\n  @apply col-span-full md:col-span-2 row-start-1 w-full pt-14;\n}\n\n.aside .toc {\n  @apply sticky top-20;\n}\n\n.article {\n  @apply col-span-full md:col-span-6 md:col-start-1 md:row-start-1 prose w-full p-4 max-w-3xl m-auto;\n}\n</style>\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,UAAM,eAAe,CAAC,UAAU;AAC9B,UAAI,SAAS,MACV,IAAI,CAAC,SAAS;AACb,YAAI,QAAQ,CAAC,IAAI;AACjB,YAAI,KAAK,UAAU;AACjB,cAAI,YAAY,aAAa,KAAK,QAAQ;AAC1C,kBAAQ,CAAC,MAAM,GAAG,SAAS;AAAA,QACnC;AACM,eAAO;AAAA,MACR,CAAA,EACA,KAAK,CAAC;AAET,cAAQ,IAAI,EAAE,QAAQ;AAEtB,aAAO;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;ACSmB,QAAI,CAAE,CAAA;AAEV,cAAS;AACxB,UAAM,YAAY,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BlB,UAAA,EAAE,KAAK,IAAI,SAAS;AAC1B,UAAM,EAAE,KAAA,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,YAAM,aAAa,WAAW,IAAI,IAAI,YAAY;AAE7D,UAAA,UAAU,eAAe,MAAM,EAAE,OAAO,KAAA,CAAM,EAAE,QAAQ;AAG5D,UAAI,WAAW,aAAa,EACzB,KAAK,CAAC,SAAS,SAAS,aAAa,CAAC,EACtC,KAAK,EAAE,MAAM,GAAG,EAChB,aAAa,IAAI;AAEb,aAAA;AAAA,QACL,SAAS,MAAM;AAAA,QACf,UAAU,MAAM;AAAA,MAClB;AAAA,IAAA,CACD,CAAA;AAGD,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,MAAM;AAChC,YAAQ,IAAI,EAAE,MAAM,MAAM,MAAM;AAGxB,YAAA;AAAA,MACN,OAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,MAAM;AAAA,QACJ,EAAE,MAAM,eAAe,SAAS,KAAK,MAAM,QAAQ,YAAY;AAAA,QAC/D;AAAA,UACE,KAAK;AAAA,UACL,UAAU;AAAA,UACV,SAAS,oBAAoB,KAAK,MAAM,QAAQ,GAAG;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}